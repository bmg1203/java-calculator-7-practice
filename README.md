# java-calculator-precourse

## 문자열 덧셈 계산기

### 기능 요구 사항

1. **빈 문자열 입력 시 0 반환**
    - 빈 문자열이나 null이 입력된 경우에는 `0`을 반환한다.
2. **쉼표(,) 또는 콜론(:)을 기준으로 문자열을 분리하여 숫자의 합을 계산**
    - 쉼표와 콜론을 구분자로 사용하는 문자열을 입력하면 각 숫자를 분리하여 그 합을 계산한다.
3. **커스텀 구분자 지원**
    - 커스텀 구분자는 문자열 앞부분에 `//`와 `\n` 사이에 위치하며, 이를 사용해 입력된 문자열을 분리한다.
4. **잘못된 입력 처리**
    - 입력 값에 음수가 포함되거나 형식이 올바르지 않은 경우 `IllegalArgumentException`을 발생시키고 에러 메시지를 출력한다.

### 예외사항 및 고려할 점

1. **음수가 입력될 경우**
    - 예시 : "1,-2,3"
2. **숫자 이외의 문자가 포함된 경우**
    - 예시 : "1,-2,a"
3. **커스텀 구분자 '//'뒤에 '\n'가 오지 않을 경우**
    - 예시 : "//.1;2"
4. **escape 문자가 필요한 특수 문자가 커스텀 문자가 될 경우(처리를 다르게 해야함)**
    - 예시 : "//.\n1.2.3"
5. **커스텀 구분자 뒤에 아예 숫자가 없을경우**
    - 예시 : "//;\n"
6. **','와 ';' 이외의 기호가 커스텀 구분자 지정 없이 사용될 경우**
    - 예시 : "1.1;2"

### 트러블슈팅 기록

#### 1. escape가 필요한 특수문자를 구분자로 사용

이 프로젝트에서 가장 큰 이슈 중 하나는 커스텀 구분자를 처리할 때 발생한 escape 문자 관련 문제였습니다. 구분자에 특수 문자가 포함되면 정규식에서 이를 제대로 처리하지 못하는 상황이 있었습니다. 특히 `.`과
같은 특수 문자는 정규식에서 "임의의 한 문자"로 인식되기 때문에, 이를 제대로 이스케이프 처리하지 않으면 예기치 않은 결과가 발생할 수 있었습니다.

##### 문제 상황

- 입력: `//.\n1.2.3`
- 이 때 `.`은 정규식에서 특별한 의미를 가지므로, split(".") 의 결과를 했을 때 "."을 기준으로 "1.2.3"이 나누어지지 않았습니다.
- 따라서 예상했던 덧셈 결과가 아닌 잘못된 결과가 나왔습니다.

##### 해결 방법

커스텀 구분자가 특수 문자인 경우, 이를 정규식에서 안전하게 처리하기 위해 escape 처리가 필요하다는 것을 알게 되었습니다. 이를 해결하기 위해 특수 문자를 이스케이프 처리하는 메서드를 추가했습니다:

```java
private static String escapeSpecialRegexChars(String separator) {
    return separator.replaceAll("([\\\\*+\\[\\](){}|.^$?])", "\\\\$1");
}
```

이 메서드를 통해 구분자에 특수 문자가 포함되어 있을 때도 이를 적절히 이스케이프 처리하여 정규식에서 문제없이 사용할 수 있었습니다. 예를 들어, 입력값 `//.\n1.2.3`을 처리할 때, 구분자 `.`이 올바르게
인식되어 "결과: 6"이 출력되도록 하였습니다.

#### 2 `\n` 위치를 찾을 수 없음

##### 1) 문제 상황

입력값에서 줄바꿈 문자인 `\n`의 위치를 찾을 때, 처음에는 indexof(`\n`)로 검색했으나 문자열 내에서 제대로 검색되지 않았습니다

##### 해결 방법

줄바꿈 문자를 제대로 찾기 위해서는 실제 줄바꿈 문자인 `\\n`을 검색해야 했습니다. 따라서 코드를 다음과 같이 수정했습니다:

```java
int newlineIndex = input.indexOf("\\n");
```

이 방식으로 줄바꿈 위치를 올바르게 찾는데 성공하나 이후 2번째 문제가 발생했습니다.

##### 2) 문제 상황

줄바꿈 문자의 위치를 찾고 숫자를 추출하려고 했으나, 이 때 구분자가 제대로 인식되지 않고 있었습니다.

- substring(newlineIndex +1);

##### 해결 방법

escape 문자를 고려하여 index 값을 하나 더 늘렸습니다. :

- .substring(newlineIndex +2);

#### 3. 빈 문자열 입력 처리

##### 문제 상황

프로그램 실행 중 빈 문자열이 입력되었을 때, 숫자가 없으므로 덧셈 결과가 `0`이 되어야 하지만, 이를 명시적으로 처리하지 않아 잘못된 결과가 발생했습니다.

##### 해결 방법

빈 문자열이나 공백만 포함된 문자열이 입력되었을 때, 이를 올바르게 처리하기 위해서 다음과 같은 조건문을 추가했습니다:

```
if(input ==null||input.trim().isEmpty()){
        System.out.println("결과 : 0");
    return;  // 프로그램 종료
}
```




