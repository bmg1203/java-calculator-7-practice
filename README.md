# java-calculator-precourse

--- 

> 입력한 문자열에서 숫자를 추출하여 더하는 계산기

---

### 요구 사항 분석

> - 쉼표(,) 또는 콜론(:)을 구분자로 가지는 문자열을 전달하는 경우 구분자를 기준으로 분리한 각 숫자의 합을 반환한다.
    - 예: "" => 0, "1,2" => 3, "1,2,3" => 6, "1,2:3" => 6

+ 기본 구분자 `,` 와 `:`를 가진다.
+ 구분자를 기준으로 숫자를 분리한다.
+ `""` 공백을 입력 받으면 0을 반환한다.
+ 구분자가 섞여도 동일한 기능을 수행한다.
+ 구분자와 숫자는 연속되어 제공된다.

>- 앞의 기본 구분자(쉼표, 콜론) 외에 커스텀 구분자를 지정할 수 있다. 커스텀 구분자는 문자열 앞부분의 "//"와 `"\n"` 사이에 위치하는 문자를 커스텀 구분자로 사용한다.
   - 예를 들어 "//;\n1;2;3"과 같이 값을 입력할 경우 커스텀 구분자는 세미콜론(;)이며, 결과 값은 6이 반환되어야 한다.

+ 문자열 맨 앞에 `//` 와 `\n` 사이에 입력된 문자 하나를 구분자로 사용한다.
  + 숫자를 커스텀 구분자로 받아도 될까?
+ 입력된 커스텀 구분자는 기존 구분자와 동일한 효과를 가진다.
+ `\n` 형태로 입력되야 하기에 자바에서는 `\\n`으로 입력해야 한다.

>- 사용자가 잘못된 값을 입력할 경우 `IllegalArgumentException`을 발생시킨 후 애플리케이션은 종료되어야 한다.

+ 잘못된 값이 존재한다.
+ 잘못된 입력을 IllegalArgumentException 로 처리해야 한다.

---
## 프로그램 진행
계산기 진행

1. 입력을 받는다.
2. 새로운 표현식 객체와 새로운 구분자 객체를 만든다.
3. 입력받은 문자열의 상태(길이)를 구분한다.
   1. 정상적인 길이
   2. 예외 상태
      1. 문자열이 공백으로 넘어온다.
      2. 문자열이 길이가 (커스텀 구분자 관련 문자열 길이 : 5) 이상 (커스텀 구분자의 가능성)
4. 예외 길이의 경우 처리를 한다.
   1. 공백일 경우 문자열 "0" 으로 변환한다.
   2. 길이가 (커스텀 구분자 관련 문자열 길이 : 5) 이상일 경우
      1. 커스텀 구분자 표현식에 해당하는 길이만큼 문자열을 잘라내 구분한다.
         1. head : 커스텀 구분자 후보에 해당하는 문자열 길이 5
         2. remaining part : 잘라내고 남은 부위
      2.  커스텀 구분자 후보에 해당하는 부위를 검증한다.
          1. 입력받은 head가 특정한 형태로 싸여있는지 검증하고 boolean 값을 return 한다.
      3. 커스텀 구분자가 입력형태가 맞다면 커스텀 구분자를 추출한다.
           1. 추출한 구분자의 값을 리턴한다.
           2. 추출한 구분자의 값을 구분자 객체 리스트에 넣는다.
           3. 잘라내고 남은 부위를 표현식 객체에 넣는다.
      4. 커스텀 구분자가 아닐 경우 입력받았던 값을 리턴한다.
5. 구분자를 하나로 통일 시켜 준다.
   1. 구분자 객체를 입력받는다.
   2. 표현식 객체를 입력받는다.
   3. 구분자를 통일시킨다.
      1. 표현식의 값을 파라미터로 입력받은 구분자를 첫 구분자 값으로 변환시킨다.
      2. 구분자 객체에 있는 모든 구분자에 대해서 위 과정을 반복한다.
   4. 구분자가 통일된 표현식을 반환한다.
   5. 구분자를 반환한다.
6. 표현식 검증
   1. 구분자를 입력 받는다.
   2. 구분자가 통일된 표현식을 입력 받는다.
   3. 구분자가 통일된 표현식에 다른 문자가 포함되어 있지 않은 지 검증한다.
7. 표현식 변환
   1. 표현식을 입력받는다.
   2. 구분자를 입력받는다.
   3. 구분자를 기준으로 표현식을 나누어 리스트에 담는다.
   4. 리스트의 문자열 타입의 값들을 숫자로 변환시킨다.
      1. 숫자로 변환 시켰을 때 값이 오버플로우 하지는 않는 지 검증한다.
      2. overflow 시, 값이 음수가 나온다.
8. 계산
   1. 리스트를 입력받는다.
   2. 리스트의 모든 식들을 더한다.
   3. 리스트의 합 값이 음수가 나오면 예외를 발생시킨다.
   4. 리스트의 합 값을 반환한다.
9. 정해진 형태로 출력한다.
---

## 💡 기능 목록
### 1. 입력
- [x] 클라이언트로 부터 문자열 입력받기
  - [x] 지정된 입력 정보 메시지 출력
### 2. 문자열
- [x] 입력받은 문자열 타입 확인하기
  - [x] 숫자로 시작되는 문자열
  - [x] 빈 문자열
    - [x] 0으로 취급한다.
  - [x] 커스텀 문자열로 시작하는 문자열
  - [x] 숫자로만 구성된 문자열
    - [x] 커스텀 문자열 제외한 문자열이 숫자만 있는 경우
    - [x] 표현식 전체가 숫자로만 구성

### 3.구성요소 분리
#### 구분자 
- [x] 입력받은 문자열을 하나의 문자 단위로 나눈다.
- [x] 문자열 앞부분에 커스텀 문자열이 있다면 구분자 목록에 커스텀 문자열을 포함시킨다.
#### 숫자
- [x] 입력받은 문자열에서 숫자를 구분해 담는 리스트를 만든다.
  - [x] 구분자와 구분자 사이에 연속된 숫자는 하나의 숫자로 본다.
    - [x] 단, 커스텀 구분자로 숫자가 입력되면 해당 구분자를 기준으로 나눠진 숫자로 본다.
  - [x] 구분자와 구분자가 연속해 붙어 있을 경우 그 사이의 수를 0으로 처리한다. 
      - [x] `" "`와는 구분 할 것.
### 4. 검증
- [x] 숫자, 구분자 그리고 커스텀 문자열을 제외한 나머지 문자들이 포함된 문자열
- [x] 오버플로우
### 5. 계산
- [x] 리스트의 모든 요소를 더한다.
### 6. 출력
- [x] 출력 양식에 맞게 결과를 출력한다.


## 기능 목록 구분

---

> 클래스 별로 구현해야 할 기능을 구분한 목록

### 🕹️controller

---
#### CalcController
- [x] 생성 시 새로운 계산 객체를 만듦
- [x] String 리스트 형태로 입력된 값을 Long 리스트로 변환
- [x] 계산 전 잘못된 값(리스트 요소 중 오버플로우 발생)이 있는지 검증
- [x] 계산 로직
- [x] 결과 검증(오버 플로우 발생)
- [x] 결과값 반환
#### ExpressionController
- [x] 표현식 생성
  - [x] 입력받은 표현식 객체를 필드에 지정
  - [x] 새로운 구분자 저장소 생성
- [x] 표현식 자르기
  - [x] 커스텀 구분자 처리 전 표현식을 가공
- [x] 커스텀 구분자 처리
  - [x] 커스텀 구분자 존재 시
    - [x] 커스텀 구분자를 구분자 저장소에 저장
    - [x] 커스텀 구분자 입력식을 제외한 나머지 식을 실제식에 저장
  - [x] 커스텀 구분자 미 존재 시
    - [x] raw 표현식을 실제식에 저장
- [x] 구분자 통일
  - [x] 실제식 값을 받아 모든 구분자를 하나의 구분자로 통일
- [x] 문자열 리스트 반환
  - [x] 통일된 구분자와 숫자를 제외한 나머지 문자가 섞였는지 검증
  - [x] 구분자를 기준으로 나뉘어진 문자열 리스트 반환

#### InputController
- [x] 입력 받은 값 처리
  - [x] 새로운 입력식 객체 생성
  - [x] 입력식 객체에 입력받은 값 저장
    - [x] 공백 입력 시 `"0"` 을 반환
- [x] 입력식 객체 반환
#### TotalController
- [x] 각 컨트롤러들 생성
- [x] 입력
- [x] 변환
- [x] 계산
- [x] 출력
### 🛠️domain

----
#### constant
- [x] 사용할 상수 값을 모아두기
- [x] 커스텀 구분자를 지정하는 문자들
- [x] 길이 상수
#### Calc
- [x] 입력 받은 Long 타입 숫자들을 전부 더하고 필드에 저장
- [x] 필드에 가지고 있는 값을 반환
#### CustomDelim
- [x] 생성 시 입력 받은 값으로부터 커스텀 구분자를 뽑아내 필드에 저장
- [x] 필드에 저장된 구분자를 반환
#### CustomDelimExtract
- [x] 입력 받은 커스텀 구분자 입력식에서 커스텀 구분자만을 뽑아냄
  - [x] 문자열에서 입력 받은 특정 문자열을 제거
#### CustomDelimVerify
- [x] 입력 받은 커스텀 구분자 후보 값이 존재하는 지를 리턴
  - [x] 입력 받은 커스텀 구분자 후보 값이 적정한 길이(커스텀 구분자 입력식보다 길이가 긴 지)인지
  - [x] 지정된 커스텀 구분자 입력식 형태로 입력 되었는지
    - [x] 커스텀 구분자 후보 값의 시작값
    - [x] 커스텀 구분자 후보 값의 종료값
#### Prep
- [x] 입력받은 구분자 값을 기준으로 문자열 List 생성
  - [x] 구분자 값을 기준으로 자르되 빈 값이 아닌 값들만 모으기
- [x] 입력받은 문자열 List의 요소들을 Long값으로 변환
#### Unify
- [x] 시작 전 세팅
  - [x] 새로운 문자열 리스트를 생성해 입력 받은 리스트를 저장
  - [x] 입력받은 표현식을 필드에 저장
- [x] 입력받은 표현식의 모든 구분자를 통일시킴
  - [x] 필드에 저장된 표현식에서 입력받은 구분자 값을 구분자 리스트의 첫 요소로 변환
#### UserExpression
- [x] 사용자의 입력 값을 담는 클래스
- [x] 입력받은 그대로 값인 rawExpression
- [x] 커스텀 구분자 후보 값
- [x] 커스텀 구분자 입력식을 제외한 실제 순수 표현식
#### UserExpressionDivide
- [x] 사용자의 입력값 객체(UserExpression)를 받아 값들을 설정
- [x] 커스텀 구분자를 만들기에 충분한 길이를 가지고 있는지
  - [x] 충분한 경우
    - [x] userExpression의 후보값을 설정하기
      - [x] 커스텀 구분자 지정값 만큼 자르기
    - [x] userExpression의 실제값 설정하기
      - [x] 후보값을 제외한 나머지 값
  - [x] 충분하지 않는 경우
    - [x] 실제식에 raw값을 넣음
#### Validation
- [x] `IllegalArgumentException()`
  - [x] 문자열에 구분자들을 제외한 값이 들어올 경우
    - [x] 커스텀 구분자 처리 이후
    - [x] 구분자가 통일된 이후
  - [x] 입력 받은 값들 중 Long 값의 범위를 벗어나는 값이 들어 온 경우
    - [x] Long 타입의 리스트를 받았을 때 루프를 돌면서
  - [x] 최종 합의 결과가 Long의 값을 벗어나는 경우
    - [x] 최종 값을 만들어 냈을 때
### 🛖repositoy

---
#### DelimiterRepository
- [x] 구분자를 담는 문자열 리스트
- [x] 생성 시 기본으로 정해둔 구분자 값 입력
- [x] 구분자 리스트를 반환
- [x] 구분자 리스트에 값 추가(커스텀 구분자 입력)
#### NumberRepository
- [x] 숫자를 담는 Long 리스트
- [x] 필드에 값을 담기
- [x] 리스트 값을 가져오기


### 👀view

---
#### 입력
- [x] 사용자에게 메시지 출력
- [x] 입력 받은 후 반환
#### 출력
- [x] 받은 결과를 정해진 형태의 출력 포맷으로 변환
- [x] 변환된 결과 출력