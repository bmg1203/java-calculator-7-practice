# java-calculator-precourse

#문자열 덧셈 계산기

## 기능 요구 사항

문자열 덧셈 계산기는 입력된 문자열에서 숫자을 추출하여 더하는 기능을 제공한다.
아래 기능 목록을 구현한다.

### 1. 기본 구분자(쉽표 또는 콜론)를 이용한 숫자 합산기능
- 쉼표(,) 또는 콜론(:)을 구분자로 가지는 문자열을 전달할 경우, 구분자를 기준으로 숫자를 분리하고 합산한 결과를 반환한다.
  - 예시: 
    - "" => 0
    - "1,2" => 3
    - "1,2,3" => 6
    - "1,2:3" => 6

### 2. 커스텀 구분자를 지정하여 숫자 합산 기능
- 커스텀 구분자는 문자열 앞부분의 `//`와 `\n` 사이에 위치하는 문자입니다. 이 구분자를 사용하여 숫자를 분리하고 합산한다.
  - 예시: 
    - "//;\n1;2;3" => 6

### 3. 잘못된 입력에대한 예외처리

- 입력값에 잘못된 값이 포함될 경우 `IllegalArgumentException` 예외를 발생시키고, 애플리케이션이 종료된다.
  - 예시: 
    - 음수가 포함된 경우 (예: "-1,2,3") => `IllegalArgumentException` 발생
    - 숫자 이외의 값이 포함된 경우 (예: "1,a,3") => `IllegalArgumentException` 발생

### 4. 빈 문자열 또는 null 입력에 대한 처리
- 입력값이 빈 문자열("")이거나 null인 경우 0을 반환합니다.
  - 예시: 
    - "" => 0
    - null => 0

======================================================================================================================================================

## 프로그램 구성

프로그램은 입력된 문자열에서 숫자를 추출하여 덧셈을 수행하는 계산기.
입력된 문자열을 처리하여 쉼표(,) 또는 콜론(:)을 기준으로 숫자를 분리하고, 이를 모두 더하는 구성이다.


### 1. 클래스 구조

- **Application  클래스** : 메인 메서드를 포함하며, 사용자로부터 문자열을 입력받고 `StringCalculator`를 사용하여 결과를 출력하는 역할을 한다.

- **StringCalculator 클래스** : 입력된 문자열을 처리하고, 숫자를 추출하여 덧셈을 수행하는 주요 로직을 포함한다.

   `add(String input)`: 입력된 문자열을 구분자로 분리하여 합을 계산하는 메서드.
   `parsePositiveInt(String value)`: 문자열을 정수로 변환하고 음수나 숫자가 아닌 값이 있을 경우 예외를 발생시키는 유틸리티 메서드.



### 2. 주요 로직 설명

- **구분자 처리** : 문자열에서 쉼표(,)와 콜론(:)을 기본 구분자로 사용하여 숫자를 분리. 구분자가 포함되지 않은 경우 빈 문자열을 처리하고, 잘못된 형식의 입력에 대해서는 예외를 던집니다.

- **음수 및 잘못된 입력 처리** : `parsePositiveInt` 메서드를 사용하여 음수나 숫자가 아닌 값을 감지하고, 예외(`IllegalArgumentException`)를 발생시킵니다. 이 예외는 `Application` 클래스에서 처리된다.
- **예외 발생 시 프로그램 종료** : 잘못된 입력이 감지되면 해당 값을 수집하여 한꺼번에 예외 메시지를 출력한 후 프로그램을 종료한다.

### 3. 프로그램 흐름
1. 사용자로부터 문자열을 입력받습니다.
2. 입력된 문자열이 빈 문자열이거나 null이면 0을 반환합니다.
3. 문자열을 쉼표 또는 콜론을 기준으로 분리합니다.
4. 분리된 문자열에서 음수나 숫자가 아닌 값이 포함되었는지 검사합니다.
5. 모든 값이 정상적일 경우, 각 숫자를 합산하여 결과를 반환합니다.
6. 잘못된 값이 있을 경우, 예외 메시지와 함께 프로그램을 종료.

## 예외 처리
- 이 프로그램은 음수 값이나 잘못된 입력이 있을 경우 예외를 발생시키며, 모든 잘못된 입력 값을 한꺼번에 수집하여 출력한 후 프로그램을 종료합니다.

## 커스텀 구분자 처리
- 콘솔에  //;\n1;2;3  를 입력하면 출력값으로 6  커스텀 구분자로 ; 를 인식하도록 하야 한다
- 정규식을 기반으로 `Pattern.compile("//(.)\n(.*)")` 을 사용하여 커스텀 구분자와 숫자를 추출 하려고했다
- 계속 인식되지않아서 찾아보니 시스템에서 `\n`  에 대하여 이스케이프 문자로 인식해서 이다   `\n`은 `개행문자`로 줄바꿈을 나타내기 때문이다
- 그래서 `Pattern.compile("//(.)\n(.*)")` 에서의  `\n` 이 이스케이프 시퀀스로 해석되어서 줄바꿈으로 바뀌었다 
- 정규식에서 `\n`을 인식시키기 위해서 `\\n` 으로  `Pattern.compile("//(.)\\n(.*)")`으로 수정했다
- 그후 ` input = input.replace("\\n", "\n");` 를 추가해서 `\\n` 이라는 것이 있으면  `\n` 이라는 개행 문자로 바꿔라는 것을 추가했다
- 이제 입력값 ` //;\n1;2;3 `  에 대하여  6 이라는 출력값이 출력됬다



## Application Test 
- 커스텀_구분자_사용 테스트는 성공
- 예외_테스트에서 오류발생 Application Test 클래스는 예외가 발생하면 콘솔에 출력하고 프로그램을 종료하지만, 테스트 코드에서는 이를 검증할 방법이없음.
- 예외를 다시 던져서 테스트가 그 예외를 잡아야 테스트가 통과할수있다 
- 예외를 다시 던져서 테스트에서 이를 검증 할수 있도록 한다
- Application 클래스에서 예외를 다시 잡을수 있도록 break를 throw e 로 수정
- ApplicationTest 예외_테스트 성공 하지만 Application에서 실행했을때 오류발생 
- -1,2,3 을 콘솔에 입력후 `IllegalArgumentException` 이 발생후 프로그램 종료시 예외 스택 트레이스가 출력되는문제 발생
- Application 클래스에서 예외를 콘솔에 출력한 후 다시 던졌기 때문
- 테스트와 실제 콘솔 실행을 구분 
- `Application ` 에 테스트 환경과 구분하기위한 것을 작성 `isTestMode` 기본으로 false로 설정하여 실제 실행 환경에서는 예외를 던지지 않고 종료하도록한다.
- 예외가 발생시 테스트 모드일 경우에는 예외를 다시 던져서 `ApplicationTest`에서 잡을수 있도록 한다.
- `ApplicationTest` 에서의 예외_테스트 에서 테스트 코드가 예외를 적었지만 실제로는 예외가 발생하지 않아 오류발생
- `runExption("-1,2,3")`이 호출될 때 `IllegalArgumentException`이 발생해야 테스트가 통과한다
- 콘솔에서 프로그램을 실행할 때 예외는 발생하지만 테스트 코드에서 이를 잡아내지 못하는 문제
- 현재는 예외가 발생한 후 프로그램이 종료되는방식 = 테스트 코드가 예외를 검증하기 전에 프로그램이 종료된다
- 테스트 코드에서 예외가 발생시 프로그램이 종료되지 않고 테스트 환경에서 예외를 적절히 잡을 수 있도록 한다
